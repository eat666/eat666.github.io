webpackJsonp([4],{119:function(t,a,e){function n(t){e(138)}var s=e(8)(e(125),e(144),n,"data-v-59b7ba36",null);t.exports=s.exports},125:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={data:function(){return{dishList:null,randomTimeout:0,randomSpeed:100,randomCount:15,afterLike:!1,isRandom:!1,startPos:0}},methods:{stopRandom:function(){clearTimeout(this.randomTimeout),this.isRandom=!1},startRandom:function(){var t=this;this.isRandom=!0,this.startPos++,this.startPos==this.randomCount&&(this.startPos=0),this.randomTimeout=setTimeout(function(){t.startRandom()},this.randomSpeed)},checkLike:function(t){if(!t)return!1;var a=t.split(",");if(a.length){for(var e=0,n=a.length;e<n;e++)if(a[e]==bus.username)return!0;return!1}return!1},addLike:function(t){var a=this,e=event.currentTarget.dataset.liker;if(this.checkLike(e))return this.$message({message:"你已收藏",type:"warning"});this.axios.post(apiUrl+"/eatApi/user/like",{id:t}).then(function(t){var e=t.data;1==e.msgcode?(a.$message({message:"收藏成功",type:"success"}),a.afterLike=!0):1014==e.msgcode?a.$router.push("/login"):a.$message({message:e.msg,type:"warning"})}).catch(function(t){a.$message({message:"收藏失败，请重试",type:"warning"})})}},mounted:function(){var t=this;this.axios.get(apiUrl+"/eatApi/dish/random",{params:{count:this.randomCount}}).then(function(a){var e=a.data;1==e.msgcode?(t.dishList=e.dishList,t.startRandom()):(t.stopRandom(),t.$message({message:e.msg,type:"warning"}))}).catch(function(a){console.log(a),t.stopRandom(),t.$message({message:"信息获取失败，尝试刷新页面",type:"warning"})})},filters:{dateFilter:function(t){return t.split("T")[0]},getAvg:function(t){return t&&t.length?parseFloat((t.reduce(function(t,a){return a+t})/t.length).toFixed(1)):5},tasteFilter:function(t){switch(t){case"1":return"酸";case"2":return"甜";case"3":return"辣";case"4":return"鲜"}},meatFilter:function(t){switch(t){case"0":return"荤素搭配";case"1":return"主荤";case"2":return"主素"}}}}},132:function(t,a,e){a=t.exports=e(116)(!0),a.push([t.i,'.time[data-v-59b7ba36]{font-size:13px;color:#999}.bottom[data-v-59b7ba36]{margin-top:13px;line-height:12px}.button[data-v-59b7ba36]{padding:0;float:right}.image[data-v-59b7ba36]{width:100%;display:block}.clearfix[data-v-59b7ba36]:after,.clearfix[data-v-59b7ba36]:before{display:table;content:""}.clearfix[data-v-59b7ba36]:after{clear:both}.row3[data-v-59b7ba36]{position:absolute;bottom:-50px}.random-btn[data-v-59b7ba36]{margin-left:0}.loading[data-v-59b7ba36]{text-align:center}.loading i[data-v-59b7ba36]{font-size:28px}.tag[data-v-59b7ba36]{float:left;margin-top:10px}.like[data-v-59b7ba36]{cursor:pointer;float:right;margin-top:10px;font-size:18px}.like .el-icon-star-off[data-v-59b7ba36]:hover,.like .el-icon-star-on[data-v-59b7ba36]{color:#f7ba2a}',"",{version:3,sources:["D:/zhaohd/vue-eat/src/components/dish/random.vue"],names:[],mappings:"AACA,uBACI,eAAgB,AAChB,UAAY,CACf,AACD,yBACI,gBAAiB,AACjB,gBAAkB,CACrB,AACD,yBACI,UAAW,AACX,WAAa,CAChB,AACD,wBACI,WAAY,AACZ,aAAe,CAClB,AACD,mEAEI,cAAe,AACf,UAAY,CACf,AACD,iCACI,UAAW,CACd,AACD,uBACI,kBAAmB,AACnB,YAAc,CACjB,AACD,6BACI,aAAe,CAClB,AACD,0BACI,iBAAmB,CACtB,AACD,4BACI,cAAgB,CACnB,AACD,sBACI,WAAY,AACZ,eAAiB,CAEpB,AACD,uBACI,eAAgB,AAChB,YAAa,AACb,gBAAiB,AACjB,cAAgB,CACnB,AACD,uFAEI,aAAe,CAClB",file:"random.vue",sourcesContent:['\n.time[data-v-59b7ba36] {\n    font-size: 13px;\n    color: #999;\n}\n.bottom[data-v-59b7ba36] {\n    margin-top: 13px;\n    line-height: 12px;\n}\n.button[data-v-59b7ba36] {\n    padding: 0;\n    float: right;\n}\n.image[data-v-59b7ba36] {\n    width: 100%;\n    display: block;\n}\n.clearfix[data-v-59b7ba36]:before,\n.clearfix[data-v-59b7ba36]:after {\n    display: table;\n    content: "";\n}\n.clearfix[data-v-59b7ba36]:after {\n    clear: both\n}\n.row3[data-v-59b7ba36] {\n    position: absolute;\n    bottom: -50px;\n}\n.random-btn[data-v-59b7ba36] {\n    margin-left: 0;\n}\n.loading[data-v-59b7ba36] {\n    text-align: center;\n}\n.loading i[data-v-59b7ba36] {\n    font-size: 28px;\n}\n.tag[data-v-59b7ba36] {\n    float: left;\n    margin-top: 10px;\n    /* color: #58B7FF; */\n}\n.like[data-v-59b7ba36] {\n    cursor: pointer;\n    float: right;\n    margin-top: 10px;\n    font-size: 18px;\n}\n.like .el-icon-star-on[data-v-59b7ba36],\n.like .el-icon-star-off[data-v-59b7ba36]:hover {\n    color: #F7BA2A;\n}\n'],sourceRoot:""}])},138:function(t,a,e){var n=e(132);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e(117)("ce78b5a2",n,!0)},144:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t._m(0),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.dishList,expression:"!dishList"}],staticClass:"row loading"},[e("i",{staticClass:"el-icon-loading"})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.dishList,expression:"dishList"}],staticClass:"row"},t._l(t.dishList,function(a,n){return e("div",{directives:[{name:"show",rawName:"v-show",value:n==t.startPos,expression:"index==startPos"}],key:n,staticClass:"dish"},[e("el-card",{attrs:{"body-style":{padding:"0px"}}},[e("img",{staticClass:"image",attrs:{src:a.pic}}),t._v(" "),e("div",{staticStyle:{padding:"14px"}},[e("span",[t._v(t._s(a.name))]),t._v(" "),e("div",{staticClass:"bottom clearfix"},[e("el-rate",{attrs:{value:t._f("getAvg")(a.rate),disabled:"","show-text":"","text-color":"#ff9900","text-template":"{value}"}}),t._v(" "),e("div",{staticClass:"tag"},[e("el-tag",{attrs:{type:"primary"}},[t._v(t._s(t._f("tasteFilter")(a.taste)))]),t._v(" "),e("el-tag",{attrs:{type:"primary"}},[t._v(t._s(t._f("meatFilter")(a.meat)))])],1),t._v(" "),e("div",{staticClass:"like"},[e("i",{staticClass:"el-icon-star-off",attrs:{"data-liker":a.liker},on:{click:function(e){t.addLike(a._id)}}})])],1)])])],1)})),t._v(" "),e("div",{staticClass:"row row3"},[e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isRandom,expression:"isRandom"}],staticClass:"random-btn",attrs:{type:"primary"},on:{click:t.stopRandom}},[t._v("停止")]),t._v(" "),e("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.isRandom,expression:"!isRandom"}],staticClass:"random-btn",attrs:{type:"primary"},on:{click:t.startRandom}},[t._v("开始")])],1)])},staticRenderFns:[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row"},[e("p",{staticClass:"tit"},[t._v("随机筛选")])])}]}}});
//# sourceMappingURL=4.6d72d03e7cc9d866aec6.js.map