{"version":3,"sources":["webpack:///static/js/4.6d72d03e7cc9d866aec6.js","webpack:///./src/components/dish/random.vue","webpack:///random.vue","webpack:///./src/components/dish/random.vue?63e2","webpack:///./src/components/dish/random.vue?f56a","webpack:///./src/components/dish/random.vue?b0a2"],"names":["webpackJsonp","119","module","exports","__webpack_require__","injectStyle","ssrContext","Component","125","__webpack_exports__","Object","defineProperty","value","data","dishList","randomTimeout","randomSpeed","randomCount","afterLike","isRandom","startPos","methods","stopRandom","clearTimeout","this","startRandom","_this","setTimeout","checkLike","arrString","arr","split","length","i","len","bus","username","addLike","id","_this2","likerList","event","currentTarget","dataset","liker","$message","message","type","axios","post","apiUrl","then","res","msgcode","$router","push","msg","catch","err","mounted","_this3","get","params","count","console","log","filters","dateFilter","date","getAvg","array","parseFloat","reduce","pre","cur","toFixed","tasteFilter","val","meatFilter","132","version","sources","names","mappings","file","sourcesContent","sourceRoot","138","content","locals","144","render","_vm","_h","$createElement","_c","_self","_m","_v","directives","name","rawName","expression","staticClass","_l","item","index","key","attrs","body-style","padding","src","pic","staticStyle","_s","_f","rate","disabled","show-text","text-color","text-template","taste","meat","data-liker","on","click","$event","_id","staticRenderFns"],"mappings":"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","file":"static/js/4.6d72d03e7cc9d866aec6.js","sourcesContent":["webpackJsonp([4],{\n\n/***/ 119:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(138)\n}\nvar Component = __webpack_require__(8)(\n  /* script */\n  __webpack_require__(125),\n  /* template */\n  __webpack_require__(144),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-59b7ba36\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 125:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    data: function data() {\n        return {\n            dishList: null,\n            randomTimeout: 0,\n            randomSpeed: 100, //毫秒\n            randomCount: 15,\n            afterLike: false,\n            isRandom: false,\n            startPos: 0\n        };\n    },\n\n    methods: {\n        stopRandom: function stopRandom() {\n            clearTimeout(this.randomTimeout);\n            this.isRandom = false;\n        },\n        startRandom: function startRandom() {\n            var _this = this;\n\n            this.isRandom = true;\n            this.startPos++;\n            if (this.startPos == this.randomCount) {\n                this.startPos = 0;\n            }\n            this.randomTimeout = setTimeout(function () {\n                _this.startRandom();\n            }, this.randomSpeed);\n        },\n        checkLike: function checkLike(arrString) {\n            if (!arrString) {\n                return false;\n            }\n            var arr = arrString.split(',');\n            if (!arr.length) {\n                return false;\n            } else {\n                for (var i = 0, len = arr.length; i < len; i++) {\n                    if (arr[i] == bus.username) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        },\n        addLike: function addLike(id) {\n            var _this2 = this;\n\n            var likerList = event.currentTarget.dataset.liker,\n                result = this.checkLike(likerList);\n            if (result) {\n                return this.$message({\n                    message: '你已收藏',\n                    type: 'warning'\n                });\n            }\n            this.axios.post(apiUrl + '/eatApi/user/like', { id: id }).then(function (res) {\n                var data = res.data;\n                if (data.msgcode == 1) {\n                    _this2.$message({\n                        message: '收藏成功',\n                        type: 'success'\n                    });\n                    _this2.afterLike = true;\n                } else if (data.msgcode == 1014) {\n                    _this2.$router.push('/login');\n                } else {\n                    _this2.$message({\n                        message: data.msg,\n                        type: 'warning'\n                    });\n                }\n            }).catch(function (err) {\n                _this2.$message({\n                    message: '收藏失败，请重试',\n                    type: 'warning'\n                });\n            });\n        }\n    },\n    mounted: function mounted() {\n        var _this3 = this;\n\n        this.axios.get(apiUrl + '/eatApi/dish/random', { params: { count: this.randomCount } }).then(function (res) {\n            var data = res.data;\n            if (data.msgcode == 1) {\n                _this3.dishList = data.dishList;\n                _this3.startRandom();\n            } else {\n                _this3.stopRandom();\n                _this3.$message({\n                    message: data.msg,\n                    type: 'warning'\n                });\n            }\n        }).catch(function (err) {\n            console.log(err);\n            _this3.stopRandom();\n            _this3.$message({\n                message: '信息获取失败，尝试刷新页面',\n                type: 'warning'\n            });\n        });\n    },\n\n    filters: {\n        dateFilter: function dateFilter(date) {\n            return date.split('T')[0];\n        },\n        getAvg: function getAvg(array) {\n            if (array && array.length) {\n                return parseFloat((array.reduce(function (pre, cur) {\n                    return cur + pre;\n                }) / array.length).toFixed(1));\n            } else {\n                return 5;\n            }\n        },\n        tasteFilter: function tasteFilter(val) {\n            switch (val) {\n                case '1':\n                    return '酸';\n                    break;\n                case '2':\n                    return '甜';\n                    break;\n                case '3':\n                    return '辣';\n                    break;\n                case '4':\n                    return '鲜';\n                    break;\n            }\n        },\n        meatFilter: function meatFilter(val) {\n            switch (val) {\n                case '0':\n                    return '荤素搭配';\n                    break;\n                case '1':\n                    return '主荤';\n                    break;\n                case '2':\n                    return '主素';\n                    break;\n            }\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 132:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(116)(true);\n// imports\n\n\n// module\nexports.push([module.i, \".time[data-v-59b7ba36]{font-size:13px;color:#999}.bottom[data-v-59b7ba36]{margin-top:13px;line-height:12px}.button[data-v-59b7ba36]{padding:0;float:right}.image[data-v-59b7ba36]{width:100%;display:block}.clearfix[data-v-59b7ba36]:after,.clearfix[data-v-59b7ba36]:before{display:table;content:\\\"\\\"}.clearfix[data-v-59b7ba36]:after{clear:both}.row3[data-v-59b7ba36]{position:absolute;bottom:-50px}.random-btn[data-v-59b7ba36]{margin-left:0}.loading[data-v-59b7ba36]{text-align:center}.loading i[data-v-59b7ba36]{font-size:28px}.tag[data-v-59b7ba36]{float:left;margin-top:10px}.like[data-v-59b7ba36]{cursor:pointer;float:right;margin-top:10px;font-size:18px}.like .el-icon-star-off[data-v-59b7ba36]:hover,.like .el-icon-star-on[data-v-59b7ba36]{color:#f7ba2a}\", \"\", {\"version\":3,\"sources\":[\"D:/zhaohd/vue-eat/src/components/dish/random.vue\"],\"names\":[],\"mappings\":\"AACA,uBACI,eAAgB,AAChB,UAAY,CACf,AACD,yBACI,gBAAiB,AACjB,gBAAkB,CACrB,AACD,yBACI,UAAW,AACX,WAAa,CAChB,AACD,wBACI,WAAY,AACZ,aAAe,CAClB,AACD,mEAEI,cAAe,AACf,UAAY,CACf,AACD,iCACI,UAAW,CACd,AACD,uBACI,kBAAmB,AACnB,YAAc,CACjB,AACD,6BACI,aAAe,CAClB,AACD,0BACI,iBAAmB,CACtB,AACD,4BACI,cAAgB,CACnB,AACD,sBACI,WAAY,AACZ,eAAiB,CAEpB,AACD,uBACI,eAAgB,AAChB,YAAa,AACb,gBAAiB,AACjB,cAAgB,CACnB,AACD,uFAEI,aAAe,CAClB\",\"file\":\"random.vue\",\"sourcesContent\":[\"\\n.time[data-v-59b7ba36] {\\n    font-size: 13px;\\n    color: #999;\\n}\\n.bottom[data-v-59b7ba36] {\\n    margin-top: 13px;\\n    line-height: 12px;\\n}\\n.button[data-v-59b7ba36] {\\n    padding: 0;\\n    float: right;\\n}\\n.image[data-v-59b7ba36] {\\n    width: 100%;\\n    display: block;\\n}\\n.clearfix[data-v-59b7ba36]:before,\\n.clearfix[data-v-59b7ba36]:after {\\n    display: table;\\n    content: \\\"\\\";\\n}\\n.clearfix[data-v-59b7ba36]:after {\\n    clear: both\\n}\\n.row3[data-v-59b7ba36] {\\n    position: absolute;\\n    bottom: -50px;\\n}\\n.random-btn[data-v-59b7ba36] {\\n    margin-left: 0;\\n}\\n.loading[data-v-59b7ba36] {\\n    text-align: center;\\n}\\n.loading i[data-v-59b7ba36] {\\n    font-size: 28px;\\n}\\n.tag[data-v-59b7ba36] {\\n    float: left;\\n    margin-top: 10px;\\n    /* color: #58B7FF; */\\n}\\n.like[data-v-59b7ba36] {\\n    cursor: pointer;\\n    float: right;\\n    margin-top: 10px;\\n    font-size: 18px;\\n}\\n.like .el-icon-star-on[data-v-59b7ba36],\\n.like .el-icon-star-off[data-v-59b7ba36]:hover {\\n    color: #F7BA2A;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 138:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(132);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(117)(\"ce78b5a2\", content, true);\n\n/***/ }),\n\n/***/ 144:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_vm._m(0), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.dishList),\n      expression: \"!dishList\"\n    }],\n    staticClass: \"row loading\"\n  }, [_c('i', {\n    staticClass: \"el-icon-loading\"\n  })]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.dishList),\n      expression: \"dishList\"\n    }],\n    staticClass: \"row\"\n  }, _vm._l((_vm.dishList), function(item, index) {\n    return _c('div', {\n      directives: [{\n        name: \"show\",\n        rawName: \"v-show\",\n        value: (index == _vm.startPos),\n        expression: \"index==startPos\"\n      }],\n      key: index,\n      staticClass: \"dish\"\n    }, [_c('el-card', {\n      attrs: {\n        \"body-style\": {\n          padding: '0px'\n        }\n      }\n    }, [_c('img', {\n      staticClass: \"image\",\n      attrs: {\n        \"src\": item.pic\n      }\n    }), _vm._v(\" \"), _c('div', {\n      staticStyle: {\n        \"padding\": \"14px\"\n      }\n    }, [_c('span', [_vm._v(_vm._s(item.name))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"bottom clearfix\"\n    }, [_c('el-rate', {\n      attrs: {\n        \"value\": _vm._f(\"getAvg\")(item.rate),\n        \"disabled\": \"\",\n        \"show-text\": \"\",\n        \"text-color\": \"#ff9900\",\n        \"text-template\": \"{value}\"\n      }\n    }), _vm._v(\" \"), _c('div', {\n      staticClass: \"tag\"\n    }, [_c('el-tag', {\n      attrs: {\n        \"type\": \"primary\"\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"tasteFilter\")(item.taste)))]), _vm._v(\" \"), _c('el-tag', {\n      attrs: {\n        \"type\": \"primary\"\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"meatFilter\")(item.meat)))])], 1), _vm._v(\" \"), _c('div', {\n      staticClass: \"like\"\n    }, [_c('i', {\n      staticClass: \"el-icon-star-off\",\n      attrs: {\n        \"data-liker\": item.liker\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.addLike(item._id)\n        }\n      }\n    })])], 1)])])], 1)\n  })), _vm._v(\" \"), _c('div', {\n    staticClass: \"row row3\"\n  }, [_c('el-button', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.isRandom),\n      expression: \"isRandom\"\n    }],\n    staticClass: \"random-btn\",\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.stopRandom\n    }\n  }, [_vm._v(\"停止\")]), _vm._v(\" \"), _c('el-button', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.isRandom),\n      expression: \"!isRandom\"\n    }],\n    staticClass: \"random-btn\",\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.startRandom\n    }\n  }, [_vm._v(\"开始\")])], 1)])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"row\"\n  }, [_c('p', {\n    staticClass: \"tit\"\n  }, [_vm._v(\"随机筛选\")])])\n}]}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/4.6d72d03e7cc9d866aec6.js","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-59b7ba36\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=styles&index=0!./random.vue\")\n}\nvar Component = require(\"!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=script&index=0!./random.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-59b7ba36\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=template&index=0!./random.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-59b7ba36\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/dish/random.vue\n// module id = 119\n// module chunks = 4","<template>\r\n    <div>\r\n        <div class=\"row\">\r\n            <p class=\"tit\">随机筛选</p>\r\n        </div>\r\n        <div class=\"row loading\" v-show=\"!dishList\">\r\n            <i class=\"el-icon-loading\"></i>\r\n        </div>\r\n        <div class=\"row\" v-show=\"dishList\">\r\n            <div v-for=\"(item, index) in dishList\" :key=\"index\" class=\"dish\" v-show=\"index==startPos\">\r\n                <el-card :body-style=\"{ padding: '0px' }\">\r\n                    <img :src=\"item.pic\" class=\"image\">\r\n                    <div style=\"padding: 14px;\">\r\n                        <span>{{item.name}}</span>\r\n                        <div class=\"bottom clearfix\">\r\n                            <el-rate :value=\"item.rate|getAvg\" disabled show-text text-color=\"#ff9900\" text-template=\"{value}\">\r\n                            </el-rate>\r\n                            <div class=\"tag\">\r\n                                <el-tag type=\"primary\">{{item.taste | tasteFilter}}</el-tag>\r\n                                <el-tag type=\"primary\">{{item.meat | meatFilter}}</el-tag>\r\n                            </div>\r\n                            <div class=\"like\">\r\n                                <i class=\"el-icon-star-off\" :data-liker=\"item.liker\" @click=\"addLike(item._id)\"></i>\r\n                                <!-- <i class=\"el-icon-star-on\" v-show=\"afterLike\"></i> -->\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </el-card>\r\n            </div>\r\n        </div>\r\n        <div class=\"row row3\">\r\n            <el-button type=\"primary\" @click=\"stopRandom\" v-show=\"isRandom\" class=\"random-btn\">停止</el-button>\r\n            <el-button type=\"primary\" @click=\"startRandom\" v-show=\"!isRandom\" class=\"random-btn\">开始</el-button>\r\n            <!-- <el-button type=\"primary\">条件筛选</el-button> -->\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                dishList: null,\r\n                randomTimeout: 0,\r\n                randomSpeed: 100,//毫秒\r\n                randomCount: 15,\r\n                afterLike: false,\r\n                isRandom: false,\r\n                startPos: 0\r\n            }\r\n        },\r\n        methods: {\r\n            stopRandom() {\r\n                clearTimeout(this.randomTimeout)\r\n                this.isRandom = false\r\n            },\r\n            startRandom() {\r\n                this.isRandom = true\r\n                this.startPos++\r\n                if (this.startPos == this.randomCount) {\r\n                    this.startPos = 0\r\n                }\r\n                this.randomTimeout = setTimeout(() => {\r\n                    this.startRandom()\r\n                }, this.randomSpeed)\r\n            },\r\n            checkLike(arrString) {\r\n                if (!arrString) {\r\n                    return false\r\n                }\r\n                var arr = arrString.split(',')\r\n                if (!arr.length) {\r\n                    return false\r\n                } else {\r\n                    for (var i = 0, len = arr.length; i < len; i++) {\r\n                        if (arr[i] == bus.username) {\r\n                            return true\r\n                        }\r\n                    }\r\n                    return false\r\n                }\r\n            },\r\n            addLike(id) {\r\n                var likerList = event.currentTarget.dataset.liker,\r\n                    result = this.checkLike(likerList)\r\n                if (result) {\r\n                    return this.$message({\r\n                        message: '你已收藏',\r\n                        type: 'warning'\r\n                    })\r\n                }\r\n                this.axios.post(apiUrl + '/eatApi/user/like', { id: id }).then(res => {\r\n                    var data = res.data\r\n                    if (data.msgcode == 1) {\r\n                        this.$message({\r\n                            message: '收藏成功',\r\n                            type: 'success'\r\n                        })\r\n                        this.afterLike = true\r\n                    } else if (data.msgcode == 1014) {\r\n                        this.$router.push('/login')\r\n                    } else {\r\n                        this.$message({\r\n                            message: data.msg,\r\n                            type: 'warning'\r\n                        })\r\n                    }\r\n                }).catch(err => {\r\n                    this.$message({\r\n                        message: '收藏失败，请重试',\r\n                        type: 'warning'\r\n                    })\r\n                })\r\n            }\r\n        },\r\n        mounted() {\r\n            this.axios.get(apiUrl + '/eatApi/dish/random', { params: { count: this.randomCount } }).then(res => {\r\n                var data = res.data\r\n                if (data.msgcode == 1) {\r\n                    this.dishList = data.dishList\r\n                    this.startRandom()\r\n                } else {\r\n                    this.stopRandom()\r\n                    this.$message({\r\n                        message: data.msg,\r\n                        type: 'warning'\r\n                    })\r\n                }\r\n            }).catch(err => {\r\n                console.log(err)\r\n                this.stopRandom()\r\n                this.$message({\r\n                    message: '信息获取失败，尝试刷新页面',\r\n                    type: 'warning'\r\n                })\r\n            })\r\n        },\r\n        filters: {\r\n            dateFilter(date) {\r\n                return date.split('T')[0]\r\n            },\r\n            getAvg(array) {\r\n                if (array && array.length) {\r\n                    return parseFloat((array.reduce((pre, cur) => cur + pre) / array.length).toFixed(1))\r\n                } else {\r\n                    return 5\r\n                }\r\n            },\r\n            tasteFilter(val) {\r\n                switch (val) {\r\n                    case '1':\r\n                        return '酸'\r\n                        break;\r\n                    case '2':\r\n                        return '甜'\r\n                        break;\r\n                    case '3':\r\n                        return '辣'\r\n                        break;\r\n                    case '4':\r\n                        return '鲜'\r\n                        break;\r\n                }\r\n            },\r\n            meatFilter(val) {\r\n                switch (val) {\r\n                    case '0':\r\n                        return '荤素搭配'\r\n                        break;\r\n                    case '1':\r\n                        return '主荤'\r\n                        break;\r\n                    case '2':\r\n                        return '主素'\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n</script>\r\n\r\n<style scoped>\r\n    .time {\r\n        font-size: 13px;\r\n        color: #999;\r\n    }\r\n\r\n    .bottom {\r\n        margin-top: 13px;\r\n        line-height: 12px;\r\n    }\r\n\r\n    .button {\r\n        padding: 0;\r\n        float: right;\r\n    }\r\n\r\n    .image {\r\n        width: 100%;\r\n        display: block;\r\n    }\r\n\r\n    .clearfix:before,\r\n    .clearfix:after {\r\n        display: table;\r\n        content: \"\";\r\n    }\r\n\r\n    .clearfix:after {\r\n        clear: both\r\n    }\r\n\r\n    .row3 {\r\n        position: absolute;\r\n        bottom: -50px;\r\n    }\r\n\r\n    .random-btn {\r\n        margin-left: 0;\r\n    }\r\n\r\n    .loading {\r\n        text-align: center;\r\n    }\r\n\r\n    .loading i {\r\n        font-size: 28px;\r\n    }\r\n\r\n    .tag {\r\n        float: left;\r\n        margin-top: 10px;\r\n        /* color: #58B7FF; */\r\n    }\r\n\r\n    .like {\r\n        cursor: pointer;\r\n        float: right;\r\n        margin-top: 10px;\r\n        font-size: 18px;\r\n    }\r\n\r\n    .like .el-icon-star-on,\r\n    .like .el-icon-star-off:hover {\r\n        color: #F7BA2A;\r\n    }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// random.vue?7dbdf623","exports = module.exports = require(\"../../../node_modules/_css-loader@0.28.4@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".time[data-v-59b7ba36]{font-size:13px;color:#999}.bottom[data-v-59b7ba36]{margin-top:13px;line-height:12px}.button[data-v-59b7ba36]{padding:0;float:right}.image[data-v-59b7ba36]{width:100%;display:block}.clearfix[data-v-59b7ba36]:after,.clearfix[data-v-59b7ba36]:before{display:table;content:\\\"\\\"}.clearfix[data-v-59b7ba36]:after{clear:both}.row3[data-v-59b7ba36]{position:absolute;bottom:-50px}.random-btn[data-v-59b7ba36]{margin-left:0}.loading[data-v-59b7ba36]{text-align:center}.loading i[data-v-59b7ba36]{font-size:28px}.tag[data-v-59b7ba36]{float:left;margin-top:10px}.like[data-v-59b7ba36]{cursor:pointer;float:right;margin-top:10px;font-size:18px}.like .el-icon-star-off[data-v-59b7ba36]:hover,.like .el-icon-star-on[data-v-59b7ba36]{color:#f7ba2a}\", \"\", {\"version\":3,\"sources\":[\"D:/zhaohd/vue-eat/src/components/dish/random.vue\"],\"names\":[],\"mappings\":\"AACA,uBACI,eAAgB,AAChB,UAAY,CACf,AACD,yBACI,gBAAiB,AACjB,gBAAkB,CACrB,AACD,yBACI,UAAW,AACX,WAAa,CAChB,AACD,wBACI,WAAY,AACZ,aAAe,CAClB,AACD,mEAEI,cAAe,AACf,UAAY,CACf,AACD,iCACI,UAAW,CACd,AACD,uBACI,kBAAmB,AACnB,YAAc,CACjB,AACD,6BACI,aAAe,CAClB,AACD,0BACI,iBAAmB,CACtB,AACD,4BACI,cAAgB,CACnB,AACD,sBACI,WAAY,AACZ,eAAiB,CAEpB,AACD,uBACI,eAAgB,AAChB,YAAa,AACb,gBAAiB,AACjB,cAAgB,CACnB,AACD,uFAEI,aAAe,CAClB\",\"file\":\"random.vue\",\"sourcesContent\":[\"\\n.time[data-v-59b7ba36] {\\n    font-size: 13px;\\n    color: #999;\\n}\\n.bottom[data-v-59b7ba36] {\\n    margin-top: 13px;\\n    line-height: 12px;\\n}\\n.button[data-v-59b7ba36] {\\n    padding: 0;\\n    float: right;\\n}\\n.image[data-v-59b7ba36] {\\n    width: 100%;\\n    display: block;\\n}\\n.clearfix[data-v-59b7ba36]:before,\\n.clearfix[data-v-59b7ba36]:after {\\n    display: table;\\n    content: \\\"\\\";\\n}\\n.clearfix[data-v-59b7ba36]:after {\\n    clear: both\\n}\\n.row3[data-v-59b7ba36] {\\n    position: absolute;\\n    bottom: -50px;\\n}\\n.random-btn[data-v-59b7ba36] {\\n    margin-left: 0;\\n}\\n.loading[data-v-59b7ba36] {\\n    text-align: center;\\n}\\n.loading i[data-v-59b7ba36] {\\n    font-size: 28px;\\n}\\n.tag[data-v-59b7ba36] {\\n    float: left;\\n    margin-top: 10px;\\n    /* color: #58B7FF; */\\n}\\n.like[data-v-59b7ba36] {\\n    cursor: pointer;\\n    float: right;\\n    margin-top: 10px;\\n    font-size: 18px;\\n}\\n.like .el-icon-star-on[data-v-59b7ba36],\\n.like .el-icon-star-off[data-v-59b7ba36]:hover {\\n    color: #F7BA2A;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.28.4@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/_vue-loader@12.2.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-59b7ba36\",\"scoped\":true,\"hasInlineConfig\":false}!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./src/components/dish/random.vue\n// module id = 132\n// module chunks = 4","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/_css-loader@0.28.4@css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-59b7ba36\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./random.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/_vue-style-loader@3.0.1@vue-style-loader/lib/addStylesClient.js\")(\"ce78b5a2\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/_vue-style-loader@3.0.1@vue-style-loader!./~/_css-loader@0.28.4@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/_vue-loader@12.2.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-59b7ba36\",\"scoped\":true,\"hasInlineConfig\":false}!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./src/components/dish/random.vue\n// module id = 138\n// module chunks = 4","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_vm._m(0), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.dishList),\n      expression: \"!dishList\"\n    }],\n    staticClass: \"row loading\"\n  }, [_c('i', {\n    staticClass: \"el-icon-loading\"\n  })]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.dishList),\n      expression: \"dishList\"\n    }],\n    staticClass: \"row\"\n  }, _vm._l((_vm.dishList), function(item, index) {\n    return _c('div', {\n      directives: [{\n        name: \"show\",\n        rawName: \"v-show\",\n        value: (index == _vm.startPos),\n        expression: \"index==startPos\"\n      }],\n      key: index,\n      staticClass: \"dish\"\n    }, [_c('el-card', {\n      attrs: {\n        \"body-style\": {\n          padding: '0px'\n        }\n      }\n    }, [_c('img', {\n      staticClass: \"image\",\n      attrs: {\n        \"src\": item.pic\n      }\n    }), _vm._v(\" \"), _c('div', {\n      staticStyle: {\n        \"padding\": \"14px\"\n      }\n    }, [_c('span', [_vm._v(_vm._s(item.name))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"bottom clearfix\"\n    }, [_c('el-rate', {\n      attrs: {\n        \"value\": _vm._f(\"getAvg\")(item.rate),\n        \"disabled\": \"\",\n        \"show-text\": \"\",\n        \"text-color\": \"#ff9900\",\n        \"text-template\": \"{value}\"\n      }\n    }), _vm._v(\" \"), _c('div', {\n      staticClass: \"tag\"\n    }, [_c('el-tag', {\n      attrs: {\n        \"type\": \"primary\"\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"tasteFilter\")(item.taste)))]), _vm._v(\" \"), _c('el-tag', {\n      attrs: {\n        \"type\": \"primary\"\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"meatFilter\")(item.meat)))])], 1), _vm._v(\" \"), _c('div', {\n      staticClass: \"like\"\n    }, [_c('i', {\n      staticClass: \"el-icon-star-off\",\n      attrs: {\n        \"data-liker\": item.liker\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.addLike(item._id)\n        }\n      }\n    })])], 1)])])], 1)\n  })), _vm._v(\" \"), _c('div', {\n    staticClass: \"row row3\"\n  }, [_c('el-button', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.isRandom),\n      expression: \"isRandom\"\n    }],\n    staticClass: \"random-btn\",\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.stopRandom\n    }\n  }, [_vm._v(\"停止\")]), _vm._v(\" \"), _c('el-button', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.isRandom),\n      expression: \"!isRandom\"\n    }],\n    staticClass: \"random-btn\",\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.startRandom\n    }\n  }, [_vm._v(\"开始\")])], 1)])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"row\"\n  }, [_c('p', {\n    staticClass: \"tit\"\n  }, [_vm._v(\"随机筛选\")])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-59b7ba36\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/dish/random.vue\n// module id = 144\n// module chunks = 4"],"sourceRoot":""}